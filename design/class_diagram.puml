@startuml
title 宿舍管理系统 类图（简化）

package "Controller (Boundary)" {
  class StudentController
  class DormRoomController
  class RepairController
  class AdjustRoomController
  class NoticeController
  class VisitorController
  class DormManagerController
  class AdminController
  class MainController
}

package "Service (Control)" {
  class StudentService
  class DormRoomService
  class RepairService
  class AdjustRoomService
  class NoticeService
  class VisitorService
  class DormManagerService
  class AdminService
}

package "Entity" {
  class Student {
    - username: String
    - password: String
    - name: String
    - age: int
    - gender: String
    - phoneNum: String
    - email: String
    - avatar: String
  }

  class DormRoom {
    - dormRoomId: Integer
    - dormBuildId: int
    - floorNum: int
    - maxCapacity: int
    - currentCapacity: int
    - firstBed: String
    - secondBed: String
    - thirdBed: String
    - fourthBed: String
  }

  class Repair {
    - id: Integer
    - repairer: String
    - dormBuildId: int
    - dormRoomId: int
    - title: String
    - content: String
    - state: String
    - orderBuildTime: String
    - orderFinishTime: String
  }

  class AdjustRoom {
    - id: Integer
    - username: String
    - name: String
    - currentRoomId: int
    - currentBedId: int
    - towardsRoomId: int
    - towardsBedId: int
    - state: String
    - applyTime: String
    - finishTime: String
  }

  class Notice {
    - id: Integer
    - title: String
    - content: String
    - author: String
    - releaseTime: String
  }

  class Visitor {
    - id: Integer
    - visitorName: String
    - gender: String
    - phoneNum: String
    - originCity: String
    - visitTime: String
    - content: String
  }

  class DormManager {
    - username: String
    - password: String
    - dormBuildId: int
    - name: String
    - gender: String
    - age: int
    - phoneNum: String
    - email: String
  }

  class Admin {
    - username: String
    - password: String
    - name: String
    - gender: String
    - age: int
    - phoneNum: String
    - email: String
  }

  class User {
    - username: String
    - password: String
    - identity: String
    - avatar: String
  }
}

'Controller' .down.>'Service'
StudentController --> StudentService
DormRoomController --> DormRoomService
RepairController --> RepairService
AdjustRoomController --> AdjustRoomService
NoticeController --> NoticeService
VisitorController --> VisitorService
DormManagerController --> DormManagerService
AdminController --> AdminService
MainController --> StudentService
MainController --> DormManagerService
MainController --> AdminService

'Service' ..down.> 'Entity'
StudentService --> Student
DormRoomService --> DormRoom
RepairService --> Repair
AdjustRoomService --> AdjustRoom
NoticeService --> Notice
VisitorService --> Visitor
DormManagerService --> DormManager
AdminService --> Admin

'Entity' o-- DormRoom : contains >
'Occupancy and associations with explicit multiplicities'
Student "0..1" -- "0..4" DormRoom : occupies
Repair "0..*" --> "1" Student : reportedBy
Repair "0..*" --> "1" DormRoom : relatedTo
AdjustRoom "0..*" --> "1" Student : applicant
AdjustRoom "0..*" --> "1" DormRoom : currentRoom
AdjustRoom "0..*" --> "1" DormRoom : towardsRoom
Visitor "0..*" --> "1" DormRoom : visits
Notice "0..*" --> "1" Admin : publishedBy


note left
 - 控制器 = 边界类 (Boundary)
 - 服务 = 控制类 (Control)
 - 实体 = 实体类 (Entity)
end note

@enduml